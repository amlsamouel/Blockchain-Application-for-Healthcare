<!DOCTYPE html>
<html lang="en" style="padding: 0; margin: 0; width:auto;">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit/Add Patient Page</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://kit.fontawesome.com/b99e675b6e.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <link
        rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
    />
    <link
        rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
    />
    <style>
        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
        }

        .rectangle {
            background-color: #77C5CA; 
            width: 1150px;
            height: 900px;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .title {
            position: absolute;
            top: 10px;
            left: 10px;
            font-size: 35px;
            font-weight: bold;
            color:  white;
        }

        .line {
            position: absolute;
            top: 40px;
            left: 10px;
            width: 1010px;
            border: none;
            border-top: 4px solid white;
        }

        .inner-rectangle {
            background-color: white;
            width: 90%; 
            height: 760px; 
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            margin-top:  50px; ;
        }

        .row {
            display: flex;
            justify-content: space-between;
            width: 80%; 
            margin-bottom: 20px;
        }

        .text-box-title {
            font-size: 20px;
            color: #000; 
            margin-bottom: 10px;
            font-weight: bold;
        }

        .text-box, select {
            width: 80%;
            padding: 10px;
            margin-bottom: 20px;
            border-width: 2px;
            border-color: #77C5CA;
            border-style: double;
        }

        .big-text-box {
            width: 80%; 
            height: 100px; 
            padding: 10px;
            margin-bottom: 20px;
            border-width: 2px;
            border-color: #77C5CA;
        }

        .button-link {
            padding: 5px 10px;
            color: white;
            background-color: #77C5CA; 
            border: none;
            border-radius: 5px;
            font-size: 30px;
            margin-left: 600px;
            width: 200px;
            margin-top: 40px;
            border-radius:100px;
            text-align: center;
        }

        .button-link:hover {
            background-color: #0f0f0f;
        }
    </style>
</head>
<body class="container-fluid" style="display: flex;">
    <div class="col-md-2">
        <h2 style="margin-top: 1rem; color: #77C5CA;"><i class='fas fa-plus-square'></i> Health care</h2>
        <button style="margin-top: 50px; height: 25px; width: 190px; background-color: white; border: solid 1px #77C5CA; color: #918f8f; padding-left: 1rem; padding-right: 1rem; border-radius: 2rem;">
            <i class='fas fa-user-alt' style="color: #77C5CA;"></i><a href="./Patient File.html">&nbsp; Patients 	&nbsp;&nbsp;&nbsp;	&nbsp;	&nbsp;	&nbsp;</a>
        </button>
        <button style="margin-top: 1rem; height: 25px; width: 190px; background-color: white; border: solid 1px #77C5CA; color: #918f8f; padding-left: 1rem; padding-right: 1rem; border-radius: 2rem;">
            <i class='fas fa-pills' style="color: #77C5CA;"></i> <a href="./Drugs.html">&nbsp; Drugs&nbsp;	 &nbsp;	&nbsp;		&nbsp;	&nbsp;	&nbsp;	&nbsp;</a>
        </button>
        <button style="margin-top: 1rem; height: 25px; width: 190px; border: solid 1px #77C5CA; color: #918f8f; padding-left: 1rem; padding-right: 1rem; background-color: #cac9c9; border-radius: 2rem;">
            <i class='fas fa-user-md' style="color: #77C5CA;"></i><a href="./Doctors.html"> &nbsp; Doctors 	&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;</a>
        </button>
        <button style="margin-top: 1rem; height: 25px; width: 190px;  background-color: white; border: solid 1px #77C5CA; color: #918f8f; padding-left: 1rem; padding-right: 1rem; border-radius: 2rem;">
            <i class='' style="color: #77C5CA;"></i><a href="./add.html">&nbsp;  Add block 		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</a>
        </button>
        <h6 style="margin-top: 1rem; padding-left: 1rem; padding-right: 1rem; margin-top: 55.1vh;"><i class='fas fa-chart-pie' style="color: #77C5CA;"></i>&nbsp; Help and Support</h6>
        <h6 style="margin-top: 1rem; padding-left: 1rem; padding-right: 1rem;"><i class='far fa-chart-bar' style="color: #77C5CA;"></i>&nbsp; Preferences</h6>
    </div>
    <div class="rectangle">
        <div class="title fas fa-arrow-left">Edit</div>
        <hr class="line">
        <div class="inner-rectangle">
            <div class="row">
                <div>
                    <label for="text-box-1" class="text-box-title">Patient Name:</label>
                    <input type="text" id="text-box-1" class="text-box">
                </div>
                <div>
                    <label for="dateOfBirth" class="text-box-title">Date of Birth:</label>
                    <input type="date" id="dateOfBirth" class="text-box">
                </div>
            </div>
            <div class="row">
                <div>
                    <label for="gender" class="text-box-title">Gender:</label>
                    <select id="gender" class="text-box">
                        <option value="">Select gender</option>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div>
                    <label for="lastVisitDate" class="text-box-title">Last Visit Date:</label>
                    <input type="date" id="lastVisitDate" class="text-box">
                </div>
            </div>
            <label for="chronicDiseases" class="text-box-title">Chronic Diseases:</label>
            <textarea id="chronicDiseases" class="big-text-box"></textarea>
            <label for="text-box-3" class="text-box-title">Current Treatment:</label>
            <input type="text" id="text-box-3" class="text-box">
            <button id="editButton" class="button-link" onclick="editLocalStorage()">Update Data</button>
            <button id="addButton" class="button-link" onclick="addNewPatient()">Add New Patient</button>
        </div>
    </div>

    <script>
        function editLocalStorage() {
            var patientKey = "patient_123"; // Replace with the actual key of the patient data you want to edit

            // Retrieve current patient data from Local Storage
            var existingData = localStorage.getItem(patientKey);

            // Check if patient data exists
            if (existingData) {
                // Parse the JSON string to convert it back to an object
                var patientData = JSON.parse(existingData);

                // Get values from input fields for editing
                var patientName = document.getElementById("text-box-1").value;
                var dateOfBirth = document.getElementById("dateOfBirth").value;
                var gender = document.getElementById("gender").value;
                var lastVisitDate = document.getElementById("lastVisitDate").value;
                var chronicDiseases = document.getElementById("chronicDiseases").value;
                var currentTreatment = document.getElementById("text-box-3").value;

                // Update the patient data with new values
                patientData.name = patientName;
                patientData.dateOfBirth = dateOfBirth;
                patientData.gender = gender;
                patientData.lastVisitDate = lastVisitDate;
                patientData.chronicDiseases = chronicDiseases;
                patientData.currentTreatment = currentTreatment;

                // Store the updated data back into Local Storage
                localStorage.setItem(patientKey, JSON.stringify(patientData));

                // Display success message
                alert("Patient data updated successfully!");
            } else {
                alert("Patient data not found!"); // Handle case where patient data doesn't exist
            }
        }

        function addNewPatient() {
            // Generate a unique key for the new patient
            var patientKey = "patient_123" + Date.now();

            // Get values from input fields for the new patient
            var patientName = document.getElementById("text-box-1").value;
            var dateOfBirth = document.getElementById("dateOfBirth").value;
            var gender = document.getElementById("gender").value;
            var lastVisitDate = document.getElementById("lastVisitDate").value;
            var chronicDiseases = document.getElementById("chronicDiseases").value;
            var currentTreatment = document.getElementById("text-box-3").value;

            // Create a new patient data object
            var patientData = {
                name: patientName,
                dateOfBirth: dateOfBirth,
                gender: gender,
                lastVisitDate: lastVisitDate,
                chronicDiseases: chronicDiseases,
                currentTreatment: currentTreatment
            };

            // Store the new patient data in Local Storage
            localStorage.setItem(patientKey, JSON.stringify(patientData));

            // Display success message
            alert("New patient data added successfully!");
        }
    </script>
</body>
</html>
